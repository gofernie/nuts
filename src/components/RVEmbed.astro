---
// src/components/RVEmbed.astro
export interface Props {
  blockId: string;
}
const { blockId } = Astro.props;
---

<section class="rv-section">
  <div class="rv-wrap" data-rv-block={blockId}></div>

  <style>
    .rv-section {
      margin: 0;
      padding: 0;
    }

    .rv-wrap {
      display: block;
      margin: 0;
      padding: 0;
      line-height: 0;
    }

    /* kill any default padding/margin the embed injects */
    .rv-wrap * {
      margin: 0 !important;
      padding: 0 !important;
    }

    /* force block layout and collapse inline spacing */
    .rv-wrap iframe,
    .rv-wrap div[data-rv-block],
    .rv-wrap .rv-container {
      display: block;
      margin: 0;
      padding: 0;
      border: none;
      width: 100%;
      height: auto;
    }

    /* sometimes RealtyVis injects bottom padding via inline style */
    .rv-wrap [style*="padding-bottom"] {
      padding-bottom: 0 !important;
    }

    /* make sure nothing is pushing it down */
    .rv-wrap:after {
      content: "";
      display: block;
      height: 0;
    }
  </style>
</section>

<script is:inline>
  if (window?.RealtyVis?.init) {
    RealtyVis.init();
  } else {
    window.__rvInitQueue = window.__rvInitQueue || [];
    window.__rvInitQueue.push({ id: "{blockId}" });
  }
</script>
